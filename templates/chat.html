{{ define "chat" }}

<div class="section">
  <div class="mb-4">
    <h3 class="title is-5">Welcome: {{ .username }}</h3>
    <form hx-post="/chat" hx-swap="none" hx-on::after-request="this.reset()">
      <input type="hidden" name="username" value="{{ .username }}" />

      <div class="is-flex">
        <input class="input mr-3 is-rounded" type="text" name="message" required autocomplete="off" placeholder="Say something" />
        <input class="button is-info" type="submit" value="Send ✉️" />
      </div>
    </form>
  </div>

  <div
    id="chat"
    hx-ext="sse"
    sse-connect="/connect_chat"
    sse-swap="chat"
    hx-swap="beforeend"
    hx-on::after-settle="this.scrollTo(0, this.scrollHeight);"
  ></div>
</div>

{{ end }}
